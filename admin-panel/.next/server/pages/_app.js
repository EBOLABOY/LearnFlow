(()=>{var e={};e.id=888,e.ids=[888],e.modules={7751:(e,t,r)=>{"use strict";r.a(e,async(e,s)=>{try{r.d(t,{Sb:()=>c,hi:()=>u});var a=r(9648),i=r(9915),n=r(6201),o=e([a,i,n]);[a,i,n]=o.then?(await o)():o;let u=a.default.create({baseURL:"https://learn-flow-ashy.vercel.app/api",timeout:1e4,headers:{"Content-Type":"application/json"}});u.interceptors.request.use(e=>{let t=i.default.get("admin_token");return t&&(e.headers.Authorization=`Bearer ${t}`),e},e=>Promise.reject(e)),u.interceptors.response.use(e=>e,e=>(e.response?.status===401?i.default.remove("admin_token"):e.response?e.response.status>=500&&n.default.error("服务器暂时无法响应，请稍后重试"):n.default.error("网络连接失败，请检查网络设置"),Promise.reject(e)));let c={login:(e,t)=>u.post("/admin/login",{email:e,password:t}),getProfile:()=>u.get("/admin/profile"),getUsers:(e={})=>u.get("/admin/users",{params:e}),updateUser:(e,t)=>u.put(`/admin/users/${e}`,t),deleteUser:e=>u.delete(`/admin/users/${e}`),getInvitations:(e={})=>u.get("/admin/invitations",{params:e}),createInvitations:e=>u.post("/admin/invitations",e),revokeInvitation:e=>u.delete(`/admin/invitations/${e}`),getStats:()=>u.get("/admin/stats"),getLogs:(e={})=>u.get("/admin/logs",{params:e})};s()}catch(e){s(e)}})},330:(e,t,r)=>{"use strict";r.a(e,async(e,s)=>{try{r.d(t,{Ho:()=>d,QO:()=>m,aC:()=>l});var a=r(997),i=r(6689),n=r(1163),o=r(9915);r(9344);var u=r(7751),c=e([o,u]);[o,u]=c.then?(await c)():c;let p=(0,i.createContext)({});function d({children:e}){let[t,r]=(0,i.useState)(null),[s,c]=(0,i.useState)(!0),d=(0,n.useRouter)(),l=async()=>{try{if(!o.default.get("admin_token")){c(!1);return}let e=await u.hi.get("/admin/profile");e.data.success?r(e.data.user):o.default.remove("admin_token")}catch(e){console.error("Auth check failed:",e),o.default.remove("admin_token")}finally{c(!1)}},m=async(e,t)=>{try{let s=await u.hi.post("/admin/login",{email:e,password:t});if(!s.data.success)return{success:!1,message:s.data.message};{let{token:e,user:t}=s.data;return o.default.set("admin_token",e,{expires:7,secure:!0,sameSite:"strict"}),r(t),{success:!0}}}catch(e){return{success:!1,message:e.response?.data?.message||"登录失败，请稍后重试"}}},f={user:t,loading:s,login:m,logout:()=>{o.default.remove("admin_token"),r(null),d.push("/admin/login")},checkAuth:l,isAuthenticated:!!t&&"admin"===t.role};return a.jsx(p.Provider,{value:f,children:e})}function l(){let e=(0,i.useContext)(p);if(!e)throw Error("useAuth must be used within an AuthProvider");return e}function m(e){return function(t){let{user:r,loading:s}=l();return((0,n.useRouter)(),s)?a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):r&&"admin"===r.role?a.jsx(e,{...t}):null}}s()}catch(e){s(e)}})},3414:(e,t,r)=>{"use strict";r.a(e,async(e,s)=>{try{r.r(t),r.d(t,{default:()=>u});var a=r(997);r(6764);var i=r(6201),n=r(330),o=e([i,n]);function u({Component:e,pageProps:t}){return(0,a.jsxs)(n.Ho,{children:[a.jsx(e,{...t}),a.jsx(i.Toaster,{position:"top-right",toastOptions:{duration:4e3,style:{background:"#363636",color:"#fff",borderRadius:"8px",padding:"12px 16px",fontSize:"14px"},success:{iconTheme:{primary:"#10b981",secondary:"#fff"}},error:{iconTheme:{primary:"#ef4444",secondary:"#fff"}}}})]})}[i,n]=o.then?(await o)():o,s()}catch(e){s(e)}})},6764:()=>{},9344:e=>{"use strict";e.exports=require("jsonwebtoken")},2785:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},6689:e=>{"use strict";e.exports=require("react")},6405:e=>{"use strict";e.exports=require("react-dom")},997:e=>{"use strict";e.exports=require("react/jsx-runtime")},2048:e=>{"use strict";e.exports=require("fs")},6162:e=>{"use strict";e.exports=require("stream")},1568:e=>{"use strict";e.exports=require("zlib")},9648:e=>{"use strict";e.exports=import("axios")},9915:e=>{"use strict";e.exports=import("js-cookie")},6201:e=>{"use strict";e.exports=import("react-hot-toast")}};var t=require("../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[567,163],()=>r(3414));module.exports=s})();