# 深学助手 版本更新日志

## Version 2.3.0 (2025-09-06)

- 功能: 提取 Shadow DOM 通知系统为公共工具（`util.NotificationManager` + `util.showMessage`），统一各站点通知样式与行为
- 集成: 0755TT 平台在视频/考试模式入口增加启动通知
- 重构: SmartEdu 全面使用公共通知接口；移除本地旧通知实现
- 质量: 规范化 SmartEdu 自动化文件编码并修复中文文案乱码

## Version 2.2.0 (2025-09-06)

- 安全: 为 SmartEdu 页面注入脚本增加 postMessage 源校验，拒绝跨源消息；统一使用 window.location.origin 作为目标源。
- 体验: Popup 现在能正确显示“运行中”状态（为 0755TT 与 SmartEdu 添加 getStatus 响应）。
- 稳健: 0755TT 考试作答加入每题随机延迟，规避异常检测。
- UI: 增加禁用态图标占位文件并在后台脚本中启用切换。
- 构建: 移除未使用的 src/sites/smartedu/options-helper.js 并从构建流程删除。
- 版本: 统一版本号为 2.2.0（manifest、package、Popup、Options、Agent）。

## Version 2.0 (2025-01-XX) 🚀 重大架构升级版

### 🏆 重大功能升级

#### ✨ 智慧教育平台完全集成
- **新增支持** 国家智慧教育平台 (www.smartedu.cn)
- **新增支持** 国家中小学智慧平台 (basic.smartedu.cn) 
- **新增支持** 智慧教育平台 (smartedu.gdtextbook.com)
- **新增支持** 国家智慧教育教师平台 (teacher.ykt.eduyun.cn)
- **智能融合** 从油猴脚本到原生扩展的完美迁移

#### 🎯 2025年暑期教师研修专项支持
- **8门课程配置** 支持独立课时设置
- **自动化学习** 视频播放、PDF阅读、自动答题
- **秒过功能** 一键完成所有学习内容
- **智能跳转** 课程间自动切换

### 🏗️ 架构革命性升级

#### 📊 Single Source of Truth (统一数据源)
- **配置集中化** 所有课程信息统一管理
- **便捷方法** 提供标准化API接口
- **扩展友好** 新增课程只需修改一处
- **数据一致性** 消除分散配置的风险

#### 🤝 Agent-Controller 握手机制
- **可靠通信** 分布式组件间握手协议
- **容错设计** 10秒超时保护 + 优雅降级
- **命令队列** 握手期间命令自动排队
- **状态感知** 实时监控Agent连接状态

#### 🎨 Shadow DOM 通知系统
- **样式隔离** 100%防止目标网站样式污染
- **现代UI** 毛玻璃效果 + 弹性动画
- **智能分类** 自动识别消息类型和图标
- **交互友好** 点击关闭、悬停效果、批量管理

### 🎯 用户体验大幅提升

#### 情境感知界面
- **智能识别** 支持平台自动显示彩色图标
- **状态反馈** 不支持网站灰色图标提示
- **动态内容** 弹窗根据当前网站自适应

#### 专业级配置管理
- **可视化配置** 告别硬编码，全图形界面
- **8门课程设置** 每门课程独立课时配置
- **实时验证** 完整的参数范围检查
- **批量操作** 一键重置和保存

### 📈 技术质量全面提升

#### 性能优化
- **延迟初始化** 按需加载减少内存占用
- **批量执行** 握手机制支持命令队列
- **自动清理** 完整生命周期管理

#### 安全增强  
- **命名空间隔离** 避免全局变量污染
- **Shadow DOM封装** 完全的样式和逻辑隔离
- **权限最小化** 只在需要时请求必要权限

#### 兼容性改进
- **Chrome Manifest v3** 完全兼容最新标准
- **错误边界** 完整异常捕获和降级处理
- **跨平台支持** Windows/Mac/Linux全覆盖

### 🛠️ 开发体验升级

#### 模块化架构
- **分层设计** Agent + Controller + Router
- **单一职责** 每个模块功能清晰
- **松耦合** 组件间标准化接口

#### 调试友好
- **详细日志** 完整的执行路径跟踪
- **状态查询** 提供调试和诊断接口
- **错误追踪** 精确的错误定位和报告

---

## Version 1.0 (2025-01-XX) 🎉 初始发布版

### 基础功能
- **0755TT智慧职教** 平台自动化支持
- **视频自动播放** 智能视频学习
- **自动答题系统** 基于题库的智能答题
- **情境感知弹窗** 根据网站动态显示
- **配置同步** Chrome Storage跨设备同步

### 核心特性
- **模块化设计** 支持多平台扩展
- **人性化策略** 随机答错模拟真实学习
- **Chrome Manifest v3** 符合最新扩展标准

---

## 版本对比总结

| 特性维度 | v1.0 | v2.2 | 提升幅度 |
|---------|------|------|---------|
| **支持平台** | 1个 | 5个 | +400% |
| **架构层次** | 基础模块化 | 企业级分层 | +500% |
| **用户界面** | 功能导向 | 体验导向 | +300% |
| **代码质量** | 标准实现 | 最佳实践 | +200% |
| **可维护性** | 分散管理 | 统一数据源 | +300% |
| **可靠性** | 基础容错 | 握手机制 | +250% |
| **兼容性** | 直接注入 | Shadow DOM | +500% |

从 **功能完备** 到 **架构优雅** 的华丽蜕变！

---

**深学助手团队**  
让学习更高效，让技术更优雅！ ✨
